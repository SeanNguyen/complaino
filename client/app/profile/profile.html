<div class="profile">
	<div class="navbar" ng-include="'app/navbar/navbar.html'"></div>
	
	<div class="mainContainer">
		<div class="complainContainer">
			<div ng-repeat='complaint in complaints | orderBy:"timestamp":true' class="complaintItem btn btn-default btn-block" ng-click='select(complaint)'
				ng-class='{activeComplaint: currentComplaint === complaint}'>
				<div layout="row" layout-align="start center">
					<div class="checkIcon">
						<i class="fa fa-circle-thin fa-2x" ng-show='$index % 2 === 0'></i>
						<i class="fa fa-check-circle-o fa-2x" ng-show='$index % 2 === 1'></i>	
					</div>
					
					<h4>{{complaint.company}}</h4>
				</div>
			</div>
		</div>
		<div class="messageContainer">
			<div ng-repeat='message in currentComplaint.messages'>
				<div class="messageBubble" ng-class="{user : message.isFromUser, helpdesk: !message.isFromUser}">
					<label ng-show='!message.isFromUser'>Sean:</label>
					<label ng-show='message.isFromUser'>Me:</label>
					<h5>{{message.content}}</h5>
				</div>
			</div>

			<div class="chat" layout layout-align='start center'>
				<md-input-container class="md-block" flex='80'>
			        <label>Reply a message</label>
			        <textarea ng-model="input.message" columns="1" md-maxlength="150" rows="2"></textarea>
			    </md-input-container>	
			    <div flex='20' layout layout-align="center center">
			    	<md-button class="md-fab md-primary" aria-label="Send" ng-click='sendMessage(input.message)'>
			            <md-icon md-svg-src="../assets/images/send.svg" style="color: #FEFEFE;"></md-icon>
			        </md-button>
				</div>
		    </div>
		</div>
		<div class="inforContainer">
			<table class="table resultItem">
            <tr>
              <td>Company</td>
              <td>{{currentComplaint.company}}</td>
            </tr>

            <tr>
              <td>Category</td>
              <td>{{currentComplaint.category}}</td>
            </tr>
            <tr>
              <td>Complain</td>
              <td>{{currentComplaint.content}}</td>
            </tr>

            <tr>
              <td>Started</td>
              <td>{{currentComplaint.timestamp | date: medium}}</td>
            </tr>
            <tr>
              <td>Last Update</td>
              <td>{{getCurrentTime()}}</td>
            </tr>
            <tr>
              <td>Customer Id</td>
              <td>{{currentComplaint.customerId}}</td>
            </tr>
            <tr>
              <td>Reference Id</td>
              <td>{{currentComplaint.referenceId}}</td>
            </tr>
            <tr>
              <td>Status</td>
              <td><span ng-show='currentComplaint.status'>Open</span><span ng-show='!currentComplaint.status'>Close</span></td>
            </tr>

          </table>
		</div>
	</div>
</div>